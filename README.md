# Rally
Rally is a offline navigation app utilizing Bluetooth mesh technology targeted at events like music festivals where it is difficult to find people and cell coverage is often limited or non-existent due to large amount of traffic or physical restrictions such as events being held in areas inherently lacking coverage e.g remote areas, underground.

## Functionality:
At a high level Rally works by creating bluetooth connections to all devices nearby running the same application. The devices they connect to are also connecting to other nearby users, hence creating a “mesh”. 

The user opens the app and is first greeted to a blank map showing the custom polygons representing buildings/stages etc.. of whichever event they are attending. From there they can create a simple temporary profile containing as much or as little information about themselves as they want (at minimum a username). Then they can either join a group or create their own. If they want to join a group they have the option of joining public or private groups. (Private groups will be password protected: not implemented yet). 

The mesh technology that Rally utilizes is called Underdark(https://github.com/udark/underdark-cocoa) I then altered this base code is to support data segregation for the group system. This works by sending and receiving log files (https://github.com/0xced/XCDLumberjackNSLogger) based on the Lumberjack protocol. The basic flow is as follows. When a user installs the app they create a profile - this contains information like username, a randomly generated userid, and their location longitude and latitude gps coordinates received every 5 mins(to save battery) from their device. 

This information is stored inside a user structure. There is also a group structure that references to a specific “users” structure for a specific group. When a user joins a group their unique id is placed into the “users” structure and can be called upon to get information on the specific user. By joining the group the user now receives every 5 mins the updated locations of all users in their “network”. They are drawn onto a locally stored map using the GoogleMaps API. (Right now not local as google does not support currently) 

If a user leaves the area of the network, their last known location will be shown. (Ideally show time last shown - not implemented). Other functionality includes the ability to see events happening nearby and the number of friends attending said event, as well as getting the compass directions to anybody selected using the compass tab. A user can also create a “RallyPoint” - a location on the map where they plan to meet with their friends. This includes a notification sent out including a picture taken at the location as well as a brief description of why the rallypoint was set and a time to meet. 
